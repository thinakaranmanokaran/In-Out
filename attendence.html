<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
        rel="stylesheet"
    />
    <title>In & Out Printer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @font-face {
            font-family: Newake;
            src: url(./assets/fonts/CreatoDisplay-Black.otf);
        }

        @font-face {
            font-family: creato;
            src: url(./assets/fonts/CreatoDisplay-Medium.otf);
        }

        * {
            margin: 0;
            padding: 0;
        }

        body {
            background: #fbf6ee;
            margin-top: 20px;
        }

        main {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            text-align: center;
            font-family: Newake;
        }

        p {
            font-family: creato;
            text-align: center;
            margin-top: 10px;
        }

        #download {
            margin-top: 10px;
        }

        #sectionSel {
            background: #000000;
            width: 300px;
            height: 7vh;
            color: #fff;
            box-shadow: 3px 3px 0px #000000;
        }

        select,
        button {
            width: 215px;
            height: 5vh;
            border-radius: 0px;
            border: 1px solid #000000;
            padding-left: 10px;
            box-shadow: 3px 3px 0px #000000;
            font-family: creato;
        }

        select:focus,
        input:focus,
        button:focus {
            box-shadow: none;
            border: 1px solid #000000;
            outline: 0px;
        }

        input {
            width: 15vw;
            height: 5vh;
            border-radius: 0px;
            border: 1px solid #000000;
            padding-left: 10px;
            box-shadow: 3px 3px 0px #000000;
            font-family: creato;
        }

        button {
            background: #000000;
            color: aliceblue;
        }

        section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
            background: #9fb4ff;
            padding: 90px 0px;
            width: 30vw;
            box-shadow: 7px 7px 0px #000000;
        }

        article {
            text-align: center;
        }

        .entry {
            display: flex;
            justify-content: space-around;
            margin: 10px 0;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .upcoming {
            font-weight: 400;
        }

        .entry span {
            width: 15vw;
            text-align: center;
            padding: 5px;
            border-radius: 5px;
        }

        hr {
            border: 1px solid #242424;
        }

        @media (max-width: 768px) {
            h1 {
                text-align: center;
                margin-top: 20px;
            }

            section {
                display: block;
            }

            input,
            select,
            button {
                width: 90%;
                margin: 5px;
                margin-left: 20px;
            }

            .entryContainer {
                display: flex;
                flex-direction: column;
                justify-content: center;
            }

            .entry {
                color: #242424;
            }
        }

        @media (max-width: 425px) {
            .para {
                display: none;
            }

            hr {
                display: none;
            }

            .upcoming {
                font-size: 12px;
                display: grid;
                grid-template-columns: repeat(2, 0fr);
                margin-left: 1vw;
                width: 80vw;
            }

            .entryContainer {
                display: flex;
            }

            button {
                height: 8vh;
            }

            .entry {
                background: #242424;
                border-radius: 10px;
                padding: 14px;
                width: 90vw;
                color: #f8eded;
            }
        }
    </style>
</head>
<body>
<main>
    <header>
        <h1>AIM'zz</h1>
        <p id="datetime">Loading current date and time...</p>
    </header>
    <section>
        <select name="" id="sectionSel">
            <option value="Login">Login</option>
            <option value="Break-Morning">Break-Morning</option>
            <option value="Lunch">Lunch</option>
            <option value="Break-Evening">Break-Evening</option>
        </select>
        <input type="text" id="nameInput" placeholder="Enter Name..." />
        <select id="departmentSelect">
            <option value="DBA">DBA</option>
            <option value="Development">Development</option>
            <option value="Digital Marketing">Digital Marketing</option>
            <option value="Trainer">Trainer</option>
            <option value="Operation Manager">Operation Manager</option>
            <option value="Managing Director">Managing Director</option>
            <option value="Visitors">Visitors</option>
        </select>
        <select name="" id="informationInput">
            <option value="-">-</option>
            <option value="Informed">Informed</option>
            <option value="Not-Informed">Not-Informed</option>
        </select>
        <input type="text" id="reasonInput" placeholder="Enter Reason..." />
        <button onclick="addEntry()">Submit</button>
    </section>
</main>
<script>
    function updateDateTime() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, "0");
        const minutes = String(now.getMinutes()).padStart(2, "0");
        const seconds = String(now.getSeconds()).padStart(2, "0");
        const day = String(now.getDate()).padStart(2, "0");

        const monthNames = [
            "Jan", "Feb", "Mar", "Apr", "May", "Jun",
            "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
        ];
        const month = monthNames[now.getMonth()];

        document.getElementById("datetime").textContent = `${hours}:${minutes}:${seconds} | ${day}-${month}`;
    }

    updateDateTime();
    setInterval(updateDateTime, 1000);

    function addEntry() {
        const name = document.getElementById("nameInput").value.toUpperCase();
        const department = document.getElementById("departmentSelect").value;
        const information = document.getElementById("informationInput").value;
        const reason = document.getElementById("reasonInput").value;

        if (!name || !information) {
            alert("Please fill all required fields.");
            return;
        }

        const now = new Date();
        const formattedTime = `${String(now.getHours()).padStart(2, "0")}:${String(now.getMinutes()).padStart(2, "0")}`;

        const entry = {
            name,
            department,
            information,
            reason,
            time: formattedTime,
        };

        let entries = JSON.parse(localStorage.getItem("entries")) || [];
        entries.push(entry);
        localStorage.setItem("entries", JSON.stringify(entries));

        const entryContainer = document.getElementById("entryContainer");

        const entryDiv = document.createElement("div");
        entryDiv.className = "entry";

        const nameSpan = document.createElement("span");
        nameSpan.textContent = name;

        const departmentSpan = document.createElement("span");
        departmentSpan.textContent = department;

        const informationSpan = document.createElement("span");
        informationSpan.textContent = information;

        const reasonSpan = document.createElement("span");
        reasonSpan.textContent = reason;

        const timeSpan = document.createElement("span");
        timeSpan.textContent = formattedTime;

        entryDiv.appendChild(nameSpan);
        entryDiv.appendChild(departmentSpan);
        entryDiv.appendChild(informationSpan);
        entryDiv.appendChild(reasonSpan);
        entryDiv.appendChild(timeSpan);

        entryContainer.appendChild(entryDiv);

        updateButtonStates();
    }

    function loadEntries() {
        const entries = JSON.parse(localStorage.getItem("entries")) || [];
        const entryContainer = document.getElementById("entryContainer");

        entries.forEach(entry => {
            const entryDiv = document.createElement("div");
            entryDiv.className = "entry";

            const nameSpan = document.createElement("span");
            nameSpan.textContent = entry.name;

            const departmentSpan = document.createElement("span");
            departmentSpan.textContent = entry.department;

            const informationSpan = document.createElement("span");
            informationSpan.textContent = entry.information;

            const reasonSpan = document.createElement("span");
            reasonSpan.textContent = entry.reason;

            const timeSpan = document.createElement("span");
            timeSpan.textContent = entry.time;

            entryDiv.appendChild(nameSpan);
            entryDiv.appendChild(departmentSpan);
            entryDiv.appendChild(informationSpan);
            entryDiv.appendChild(reasonSpan);
            entryDiv.appendChild(timeSpan);

            const currentTime = new Date();
            const [hours, minutes] = entry.time.split(':');
            const entryTime = new Date();
            entryTime.setHours(parseInt(hours, 10));
            entryTime.setMinutes(parseInt(minutes, 10));

            if (entryTime.getHours() < currentTime.getHours()) {
                timeSpan.style.backgroundColor = 'green';
            } else if (entryTime.getHours() === currentTime.getHours() && entryTime.getMinutes() < currentTime.getMinutes()) {
                timeSpan.style.backgroundColor = 'green';
            } else if (entryTime.getHours() === currentTime.getHours() && entryTime.getMinutes() === currentTime.getMinutes()) {
                timeSpan.style.backgroundColor = 'orange';
            } else {
                timeSpan.style.backgroundColor = 'red';
            }

            entryContainer.appendChild(entryDiv);
        });

        updateButtonStates();
    }

    function clearEntries() {
        localStorage.removeItem("entries");
        document.getElementById("entryContainer").innerHTML = "";
        updateButtonStates();
    }

    function updateButtonStates() {
        const entries = JSON.parse(localStorage.getItem("entries")) || [];
        document.getElementById("clear").disabled = entries.length === 0;
        document.getElementById("download").disabled = entries.length === 0;
    }

    window.onload = function () {
        loadEntries();
    };
</script>
</body>
</html>
