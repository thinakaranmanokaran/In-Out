<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
        rel="stylesheet"
    />
    <title>In & Out Printer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @font-face {
            font-family: Newake;
            src: url(./assets/fonts/CreatoDisplay-Black.otf);
        }

        @font-face {
            font-family: creato;
            src: url(./assets/fonts/CreatoDisplay-Medium.otf);
        }

        * {
            margin: 0;
            padding: 0;
        }

        body {
            background: #fbf6ee;
            margin-top: 20px;
            overflow: hidden;
        }

        main {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            text-align: center;
            font-family: Newake;
        }

        p {
            font-family: creato;
            text-align: center;
            margin-top: 10px;
        }

        #download {
            margin-top: 10px;
        }

        #sectionSel {
            background: #000000;
            width: 300px;
            height: 7vh;
            color: #fff;
            box-shadow: 3px 3px 0px #00000080;
        }

        select,
        button {
            width: 215px;
            height: 5vh;
            border-radius: 0px;
            border: 1px solid #000000;
            padding-left: 10px;
            box-shadow: 3px 3px 0px #000000;
            font-family: creato;
        }

        select:focus,
        input:focus,
        button:focus {
            box-shadow: none;
            border: 1px solid #000000;
            outline: 0px;
        }

        input {
            width: 204px;
            height: 5vh;
            border-radius: 0px;
            border: 1px solid #000000;
            padding-left: 10px;
            box-shadow: 3px 3px 0px #000000;
            font-family: creato;
        }

        button {
            background: #000000;
            color: aliceblue;
        }

        section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
            background: #9fb4ff;
            padding: 90px 0px;
            width: 30vw;
            box-shadow: 7px 7px 0px #000000;
        }

        article {
            text-align: center;
        }

        .entry {
            display: flex;
            justify-content: space-around;
            margin: 10px 0;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .upcoming {
            font-weight: 400;
        }

        .entry span {
            width: 15vw;
            text-align: center;
            padding: 5px;
            border-radius: 5px;
        }

        hr {
            border: 1px solid #242424;
        }

        @media (max-width: 768px) {
            section{
                width: 70vw;
            }

            .fa-ellipsis-vertical{
                position: absolute;
                left: -50px;
                /* border: 2px solid black; */
            }

            h4{
                left: 70px;
                width: 60vw;
            }

            .menuShow{
                transform: translateX(-40vw);
                transition: transform 0.7s ease;
                left: -40px;
            }
            
            .menuClose{
                transform: translateX(40vw);
                transition: transform 0.7s ease;
                left: -40px;
            }
        }
        
        @media (max-width: 425px) {
            section{
                width: 80vw;
            }
            
                        .fa-ellipsis-vertical{
                            position: absolute;
                            left: 10px;
                            /* border: 2px solid black; */
                        }
            
                        h4{
                            left: 270px;
                            width: 60vw !important;
                            position: absolute;
                            bottom: -92vh !important;
                            background: #ffffff60 !important;
                            backdrop-filter: blur(20px);
                        }
            
                        .menuShow{
                            transform: translateX(-50vw) !important;
                            transition: transform 0.7s ease;
                            left: 40px;
                        }
                        
                        .menuClose{
                            transform: translateX(50vw);
                            transition: transform 0.7s ease;
                            left: 40px;
                        }
        }

        @media (max-width: 320px) {
            section{
                width: 90vw;
            }

            #sectionSel{
                width: 250px;
            }

            .fa-ellipsis-vertical{
                            position: absolute;
                            left: -40px;
                            scale: 1 !important;
                            top: 20px;
                            /* border: 2px solid black; */
                        }

                        .fa-xmark{
                            scale: 1 !important;
                        }
            
                        h4{
                            left: 60px !important;
                            width: 60vw !important;
                            position: absolute;
                            bottom: -92vh !important;
                            background: #ffffff60 !important;
                            backdrop-filter: blur(20px);
                        }
            
                        .menuShow{
                            transform: translateX(-80vw) !important;
                            transition: transform 0.7s ease;
                            left: 40px;
                        }
                        
                        .menuClose{
                            transform: translateX(80vw);
                            transition: transform 0.7s ease;
                            left: 40px;
                        }
        }

        article{
            position: absolute;
            top: 10px;
            left: 94vw;
            padding: 30px;
        }

        .fa-ellipsis-vertical{
            scale: 1.5;
            right: 20px;
            position: absolute;
            /* z-index: 4; */
            cursor: pointer;
        }
        
        .fa-xmark{
            scale: 1.5;
            top: 60px;
            left: -30px;
            position: absolute;
            /* border: 2px solid black; */
            cursor: pointer;
        }

        h4{
            background: #fff;
            width: 20vw;
            /* border: #000000 2px solid; */
            height: 90vh;
            position: absolute;
            top: -1;
            right: -410px;
            bottom: -89vh;
            display: flex;
            flex-direction: column;
            text-align: left;
            padding: 40px 80px 40px 0px;
            /* padding-top: 100px; */
            box-shadow: 0px 0px 50px #000;
        }

        a{
            margin-bottom: 20px;
            font-family: creato;
            text-decoration: none;
            color: #000000;
            font-size: 18px;
            /* border: 1px solid black; */
            padding: 10px 10px 10px 30px;
        }

        a:hover{
            background: #00000020;
        }

        .clearbtt{
            color: #ff0000;
            /* margin-top: 250px; */
            cursor: pointer;
        }
        
        .aft{
            margin-top: 40px;
        }

        .menuShow{
            transform: translateX(-20vw);
            transition: transform 0.7s ease
        }
        
        .menuClose{
            transform: translateX(20vw);
            transition: transform 0.7s ease
        }

        .linkI{
            padding-bottom: 5px;
            padding-right: 10px;
        }

    </style>
</head>
<body>
<main>
    <header>
        <h1>AIM'zz</h1>
        <p id="datetime">Loading current date and time...</p>
    </header>
    <section>
        <select name="" id="sectionSel">
            <option value="Login">Login</option>
            <option value="Break-Morning">Break-Morning</option>
            <option value="Lunch">Lunch</option>
            <option value="Break-Evening">Break-Evening</option>
        </select>
        <input type="text" id="nameInput" placeholder="Enter Name..." />
        <select id="departmentSelect">
            <option value="DBA">DBA</option>
            <option value="Development">Development</option>
            <option value="Digital Marketing">Digital Marketing</option>
            <option value="Trainer">Trainer</option>
            <option value="Operation Manager">Operation Manager</option>
            <option value="Managing Director">Managing Director</option>
            <option value="Visitors">Visitors</option>
        </select>
        <select name="" id="informationInput">
            <option value="-">-</option>
            <option value="Informed">Informed</option>
            <option value="Not-Informed">Not-Informed</option>
        </select>
        <input type="text" id="reasonInput" placeholder="Enter Reason..." />
        <button onclick="addEntry()">Submit</button>
    </section>
    <div id="entryContainer"></div>
    <article>
        <i class="fa-solid fa-ellipsis-vertical" onclick="openMenu()" ></i>
        <h4 id="menu">
            <a href="login.html" class="aft"><i class="fa-solid fa-mountain-sun" id="linkI" ></i>&nbsp;&nbsp;Login</a>
            <a href="breakm.html"><i class="fa-solid fa-mug-hot" id="linkI" ></i>&nbsp;&nbsp;Break Morning</a>
            <a href="lunch.html"><i class="fa-solid fa-utensils" id="linkI" ></i>&nbsp;&nbsp; Lunch</a>
            <a href="breake.html"><i class="fa-solid fa-glass-water" id="linkI" ></i>&nbsp;&nbsp; Break Evening</a>
            <a class="clearbtt" onclick="eraserAlert()" ><i class="fa-solid fa-trash" id="linkI" ></i>&nbsp;&nbsp; Clear All Entries</a>
            <i class="fa-solid fa-xmark" onclick="closeMenu()" ></i>
            <!-- <h5 id="liki">Clear All entries</h5> -->
        </h4>
        
    </article>
</main>
<script>
        function updateDateTime() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');

        // Array of month names abbreviated to the first three letters
        const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        const month = monthNames[now.getMonth()];

        document.getElementById('datetime').textContent = `${hours}:${minutes}:${seconds} | ${day}-${month}`;
    }

    // Update the date and time immediately and every second
    updateDateTime();
    setInterval(updateDateTime, 1000);

    function addEntry() {
        const name = document.getElementById("nameInput").value.toUpperCase();
        const department = document.getElementById("departmentSelect").value;
        const information = document.getElementById("informationInput").value;
        const reason = document.getElementById("reasonInput").value;
        const section = document.getElementById("sectionSel").value;

        if (!name || !information) {
            alert("Please fill all required fields.");
            return;
        }

        const now = new Date();
        const formattedTime = `${String(now.getHours()).padStart(2, "0")}:${String(now.getMinutes()).padStart(2, "0")}`;

        const entry = {
            name,
            department,
            information,
            reason,
            time: formattedTime,
        };

        let entries = JSON.parse(localStorage.getItem(section)) || [];
        entries.push(entry);
        localStorage.setItem(section, JSON.stringify(entries));

        alert('Entry Stored!');

        updateButtonStates();
    }

    function loadEntries() {
        const sectionMap = {
            "login.html": "Login",
            "breakm.html": "Break-Morning",
            "lunch.html": "Lunch",
            "breake.html": "Break-Evening"
        };

        const currentSection = sectionMap[window.location.pathname.split("/").pop()];
        const entries = JSON.parse(localStorage.getItem(currentSection)) || [];
        const entryContainer = document.getElementById("entryContainer");

        entries.forEach(entry => {
            const entryDiv = document.createElement("div");
            entryDiv.className = "entry";

            const nameSpan = document.createElement("span");
            nameSpan.textContent = entry.name;

            const departmentSpan = document.createElement("span");
            departmentSpan.textContent = entry.department;

            const informationSpan = document.createElement("span");
            informationSpan.textContent = entry.information;

            const reasonSpan = document.createElement("span");
            reasonSpan.textContent = entry.reason;

            const timeSpan = document.createElement("span");
            timeSpan.textContent = entry.time;

            entryDiv.appendChild(nameSpan);
            entryDiv.appendChild(departmentSpan);
            entryDiv.appendChild(informationSpan);
            entryDiv.appendChild(reasonSpan);
            entryDiv.appendChild(timeSpan);

            entryContainer.appendChild(entryDiv);
        });
        console.log(localStorage.getItem('Login'));

        updateButtonStates();
    }

    function clearEntries() {
        const sectionMap = {
            "login.html": "Login",
            "breakm.html": "Break-Morning",
            "lunch.html": "Lunch",
            "breake.html": "Break-Evening"
        };

        const currentSection = sectionMap[window.location.pathname.split("/").pop()];
        localStorage.removeItem(currentSection);
        document.getElementById("entryContainer").innerHTML = "";
        updateButtonStates();
    }

    function updateButtonStates() {
        const sectionMap = {
            "login.html": "Login",
            "breakm.html": "Break-Morning",
            "lunch.html": "Lunch",
            "breake.html": "Break-Evening"
        };

        const currentSection = sectionMap[window.location.pathname.split("/").pop()];
        const entries = JSON.parse(localStorage.getItem(currentSection)) || [];
        document.getElementById("clear").disabled = entries.length === 0;
        document.getElementById("download").disabled = entries.length === 0;
    }

    function eraserAlert() {
    const sections = ["Login", "Break-Morning", "Lunch", "Break-Evening"];
    let entriesExist = false;

    // Check if any section has entries in localStorage
    for (let section of sections) {
        const entries = JSON.parse(localStorage.getItem(section)) || [];
        if (entries.length > 0) {
            entriesExist = true;
            break;
        }
    }

    if (!entriesExist) {
        alert("Entries are already erased!");
    } else {
        confirmClearAllEntries();
    }
}

function confirmClearAllEntries() {
    if (confirm("Are you sure you want to delete all Entries?")) {
        clearAllEntries();

    }
}

function clearAllEntries() {
    const sections = ["Login", "Break-Morning", "Lunch", "Break-Evening"];

    sections.forEach(section => {
        localStorage.removeItem(section);
    });

    const entryContainer = document.getElementById("entriesSection");
    if (entryContainer) {
        entryContainer.innerHTML = '';
    }

    updateButtonStates([]);
    console.log("All data cleared");
}


    window.onload = function () {
        loadEntries();
    };

    function openMenu(){
        const menu = document.getElementById("menu");
        menu.classList.add('menuShow')
        menu.classList.remove('menuClose')
        console.log('opened');
    }
    
    function closeMenu(){
        const menu = document.getElementById("menu");
        menu.classList.add('menuClose')
        menu.classList.remove('menuShow')
        console.log('closed');
    }
</script>

</body>
</html>
